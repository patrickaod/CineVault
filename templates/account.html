{% extends "base.html" %}

{% block content %}

<!-- Background Image Container -->
<div class="background-container">
    <!-- Background Image -->
    <img src="{{ url_for('static', filename='images/theater.jpg') }}" alt="Background Image" class="background-image">
</div>

<!-- Navigation Menu -->
<header>
    <!-- Main Navigation Menu -->
    <nav class="nav-extended navmargin">
        <div class="nav-wrapper">
            <!-- Logo & Account Link -->
            <a href="{{url_for('account', username=session['user'])}}" class="brand-logo nav-logo m-2 ">
                <h2>CineVault</h2>
            </a>
            <!-- Hamburger Trigger -->
            <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <!-- Right-Cluster of Navigation Links-->
            <ul class="right hide-on-med-and-down">
                <!-- Logout -->
                <li><a href="{{url_for('logout')}}">Logout</a></li>
            </ul>
        </div>
    </nav>
    <!-- Mobile sidenav -->
    <ul class="sidenav" id="mobile-demo">
        <!-- Logout -->
        <li><a href="{{url_for('logout')}}">Logout</a></li>
    </ul>
</header>
<!-- Content container -->
<div id="content-container">
    <!-- Top container - Seacrh -->
    <div class="top-section">
        <!-- Search Form -->
        <form action="{{ url_for('search_movies') }}" method="post" class="col s12">
            <div class="row">
                <div class="input-field col s6 m3 right">
                    <input id="search_movies" name="search_movies" type="search">
                    <label class="label-icon" for="search_movies"><i class="material-icons">search</i></label>
                </div>
        </form>
    </div>
    <!-- Middle container - Movie Display -->
    <div class="middle-section">
        <!-- Middle section - Add Button -->
        <button id="middleAddMovieBtn" class="add-movie-btn">Add Movie</button>
        <!-- Movie Card For Loop -->
        {% for movie in movies %}
        <!-- Movie card container -->
        <div class="movie-card">
            <ul>
                <li>
                    <div class="row">
                        <div class="col s12 m5">
                            <!-- Movie card -->
                            <div class="card-panel">
                                <span class="white-text">
                                    <h2>Movie: {{ movie.title }}</h2><br>
                                    <h2>Genre: {{ movie.genre }} </h2><br>
                                    <h2>Review: {{ movie.rating }}</h2><br>
                                    <h2>To watch: {{ movie.watchlist }}</h2><br>
                                    <h2>Added on: {{ movie.created_on }}</h2><br>
                                </span>
                                <!-- Movie card button container -->
                                <div class="row">
                                    <!-- Edit button and form values -->
                                    <button class="editMovieBtn" edit_movie_id="{{ movie.id }}"
                                        data-title="{{ movie.title }}" data-genre="{{ movie.genre }}"
                                        data-rating="{{ movie.rating }}"
                                        data-watchlist="{{ movie.watchlist }}">Edit</button>
                                    <!-- Delete button -->
                                    <button class="deleteMovieBtn" delete_movie_id="{{ movie._id }}">Delete</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        {% endfor %}
    </div>
    <!-- Bottom container - Add Button -->
    <div class="bottom-section">
        <!-- Bottom section - Add Button -->
        <button id="bottomAddMovieBtn" class="add-movie-btn">Add Movie</button>
    </div>
</div>
<!-- Movie form container-->
<div class="movieform">
    <!-- Movie form -->
    <form class="col s12 m8 offset-m2" method="POST" action="{{url_for('account', username=session['user'])}}">
      <input type="hidden" name="form_id" value="movie_user_add">
      <div class="card-panel">
        <!-- Title -->
        <div class="row">
          <div class="input-field col s12">
            <input id="title" name="title" type="text" class="validate" required>
            <label for="title">Title</label>
          </div>
        </div>
        <!-- Genre -->
        <div class="row">
          <div class="input-field col s12">
            <input id="genre" name="genre" type="text" class="validate" required>
            <label for="genre">Genre</label>
          </div>
        </div>
        <!-- Rating -->
        <div class="row">
          <div class="input-field col s12">
            <input id="rating" name="rating" type="text" class="validate" required>
            <label for="rating">Review</label>
          </div>
        </div>
        <!-- Watchlist -->
        <div class="row">
          <div class="switch">
            <label for="watchlist">
              Watchlist
              <input type="checkbox" id="watchlist" name="watchlist">
              <span class="lever"></span>
            </label>
          </div>
        </div>
        <!-- Submission -->
        <div class="row">
          <button class="btn btn-primary" class="col s12 btn-large">Submit</button>
        </div>
      </div>
    </form>
    <!-- Cancel form button -->
    <button id="moviecancel">Cancel</button>
  </div>
{% endblock %}